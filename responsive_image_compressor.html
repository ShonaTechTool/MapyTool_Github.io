<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Responsive Image Compressor — Fast & Lightweight</title>
  <meta name="description" content="Compress and optimize your images in the browser. Choose compression level, output format (JPEG/WebP), resize images and download optimized files — no upload required.">
  <link rel="canonical" href="https://example.com/image-compressor">
  <meta name="robots" content="index,follow">

  <!-- Open Graph / Social -->
  <meta property="og:title" content="Responsive Image Compressor — Fast & Lightweight">
  <meta property="og:description" content="Compress and optimize images client-side. Choose quality, format and resize — all in your browser.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://example.com/image-compressor">
  <meta property="og:image" content="https://example.com/preview.png">

  <!-- Structured data for better SEO -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebApplication",
    "name":"Responsive Image Compressor",
    "url":"https://example.com/image-compressor",
    "description":"Client-side image compression tool — choose quality, convert to WebP/JPEG, resize and download.",
    "applicationCategory":"Image Editing",
    "operatingSystem":"All",
    "offers": {"@type":"Offer","price":"0","priceCurrency":"USD"}
  }
  </script>

  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#0ea5a4;--muted:#94a3b8;font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;}
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,#07112a 0%, #051022 100%);color:#e6eef6;min-height:100vh;line-height:1.4}
    .container{max-width:1200px;margin:24px auto;padding:20px}
    header{display:flex;gap:16px;align-items:center;justify-content:space-between}
    header h1{font-size:1.2rem;margin:0}
    .layout{display:grid;grid-template-columns:1fr 320px;gap:20px;margin-top:18px}
    .card{background:rgba(255,255,255,0.02);padding:18px;border-radius:12px;box-shadow:0 6px 18px rgba(2,6,23,0.6)}

    /* Drop area */
    .drop{border:2px dashed rgba(255,255,255,0.06);padding:24px;border-radius:10px;text-align:center;cursor:pointer}
    .drop.dragover{border-color:var(--accent);transform:scale(1.01)}
    input[type=file]{display:none}

    /* Controls */
    .controls{display:flex;gap:12px;flex-wrap:wrap;align-items:center}
    label{font-size:0.85rem;color:var(--muted)}
    .range{width:180px}
    select,input[type=number]{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px;border-radius:8px;color:inherit}
    button.primary{background:linear-gradient(90deg,var(--accent),#06b6d4);border:none;padding:10px 14px;border-radius:10px;color:#001;cursor:pointer}

    /* Previews */
    .preview-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;margin-top:12px}
    .preview{background:rgba(255,255,255,0.02);padding:12px;border-radius:10px}
    .preview img{max-width:100%;height:auto;display:block;border-radius:6px}
    .meta{font-size:0.85rem;color:var(--muted);margin-top:8px;display:flex;justify-content:space-between;align-items:center}
    .small{font-size:0.78rem;color:var(--muted)}

    /* Ads column */
    aside .ad-slot{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border-radius:8px;padding:12px;text-align:center;min-height:120px;display:flex;align-items:center;justify-content:center}
    footer{margin-top:18px;text-align:center;color:var(--muted);font-size:0.85rem}

    /* Responsive */
    @media (max-width:900px){.layout{grid-template-columns:1fr}.container{padding:12px}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div>
        <h1>Responsive Image Compressor</h1>
        <div class="small">Compress and optimize images in the browser — private & fast.</div>
      </div>
      <div class="small">Made with ❤️ — Client-side (no uploads)</div>
    </header>

    <div class="layout">
      <main>
        <section class="card">
          <!-- Top ad (replace client ID & slot in the script below) -->
          <div class="ad-slot" aria-hidden="true" role="complementary">
            <!-- Google AdSense top banner goes here -->
            <div style="max-width:468px;width:100%;">Ad space — Top Banner</div>
          </div>

          <div style="height:14px"></div>

          <label for="fileInput" class="drop" id="dropArea" tabindex="0">
            <strong>Click or drag an image here</strong>
            <div class="small">Supports JPEG, PNG, WebP. Multiple images supported.</div>
            <input id="fileInput" type="file" accept="image/*" multiple>
          </label>

          <div style="height:12px"></div>

          <div class="controls" aria-hidden="false">
            <div>
              <label for="format">Output format</label><br>
              <select id="format" aria-label="Output format">
                <option value="image/webp">WebP (recommended)</option>
                <option value="image/jpeg">JPEG</option>
                <option value="image/png">PNG (lossless, larger)</option>
              </select>
            </div>

            <div>
              <label for="quality">Quality <span id="qualityVal">80</span>%</label><br>
              <input id="quality" class="range" type="range" min="10" max="100" value="80">
            </div>

            <div>
              <label for="maxWidth">Max width (px)</label><br>
              <input id="maxWidth" type="number" min="64" max="8000" step="1" placeholder="Auto">
            </div>

            <div>
              <label for="maxHeight">Max height (px)</label><br>
              <input id="maxHeight" type="number" min="64" max="8000" step="1" placeholder="Auto">
            </div>

            <div style="margin-left:auto">
              <button id="processBtn" class="primary">Compress Selected</button>
            </div>
          </div>

          <div class="preview-grid" id="previewGrid" aria-live="polite"></div>

        </section>

        <section class="card" style="margin-top:16px">
          <h2 style="margin:0 0 8px 0;font-size:1rem">How it works</h2>
          <ol class="small">
            <li>Choose image(s) using the drop area or file picker.</li>
            <li>Pick output format, quality and optional resize.</li>
            <li>Click <em>Compress Selected</em> — compressed files are generated locally and ready to download.</li>
          </ol>

          <details style="margin-top:10px">
            <summary class="small">SEO & Performance notes</summary>
            <ul class="small">
              <li>Client-side compression improves privacy and speed — no uploads.</li>
              <li>For best filesize, use WebP or AVIF (AVIF not supported in all browsers).</li>
              <li>Lazy-loading images, responsive srcset and using next-gen formats helps SEO and Core Web Vitals.</li>
            </ul>
          </details>
        </section>

      </main>

      <aside>
        <div class="card">
          <div class="ad-slot" aria-hidden="true" role="complementary">
            <div style="max-width:300px;width:100%;">Ad space — Sidebar</div>
          </div>

          <div style="height:12px"></div>

          <div class="small">
            <strong>Tips</strong>
            <ul>
              <li>Use quality 70–85 for good visual + small size.</li>
              <li>Resize to target display size for best savings.</li>
              <li>Batch compress multiple images to save time.</li>
            </ul>
          </div>
        </div>

        <div style="height:12px"></div>

        <div class="card">
          <h3 style="margin-top:0">Monetization</h3>
          <p class="small">Place AdSense units in the two ad slots above. Insert your <code>ca-pub-XXXXXXXXXXXX</code> and ad slot IDs in the script placeholder at the bottom of this file.</p>
        </div>
      </aside>
    </div>

    <footer>
      <div class="small">© <span id="year"></span> Responsive Image Compressor — Built for speed & privacy.</div>
    </footer>
  </div>

  <script>
    // Basic UI wiring & image compression logic (client-side)
    const fileInput = document.getElementById('fileInput');
    const dropArea = document.getElementById('dropArea');
    const previewGrid = document.getElementById('previewGrid');
    const quality = document.getElementById('quality');
    const qualityVal = document.getElementById('qualityVal');
    const format = document.getElementById('format');
    const processBtn = document.getElementById('processBtn');
    const maxWidth = document.getElementById('maxWidth');
    const maxHeight = document.getElementById('maxHeight');

    document.getElementById('year').textContent = new Date().getFullYear();

    quality.addEventListener('input', ()=> qualityVal.textContent = quality.value);

    // Drag & drop
    ['dragenter','dragover','dragleave','drop'].forEach(evt => dropArea.addEventListener(evt, preventDefaults, false));
    function preventDefaults(e){e.preventDefault();e.stopPropagation();}
    ['dragenter','dragover'].forEach(evt => dropArea.addEventListener(evt, ()=> dropArea.classList.add('dragover')));
    ['dragleave','drop'].forEach(evt => dropArea.addEventListener(evt, ()=> dropArea.classList.remove('dragover')));
    dropArea.addEventListener('drop', handleDrop);
    dropArea.addEventListener('click', ()=>fileInput.click());
    dropArea.addEventListener('keypress', (e)=>{ if(e.key==='Enter' || e.key===' ') fileInput.click(); });

    fileInput.addEventListener('change', (e)=> handleFiles(e.target.files));

    let filesQueue = [];
    function handleDrop(e){ const dt = e.dataTransfer; handleFiles(dt.files); }

    function handleFiles(list){
      const arr = Array.from(list);
      arr.forEach(file => {
        if(!file.type.startsWith('image/')) return;
        filesQueue.push(file);
        renderPreviewCard(file);
      });
    }

    function renderPreviewCard(file){
      const id = 'p'+Math.random().toString(36).slice(2,9);
      const card = document.createElement('div'); card.className='preview'; card.id=id;
      card.innerHTML = `<div style=\"min-height:120px;display:flex;align-items:center;justify-content:center\">Loading preview…</div>`;
      previewGrid.prepend(card);

      const reader = new FileReader();
      reader.onload = (ev)=>{
        const img = new Image(); img.src = ev.target.result;
        img.loading = 'lazy';
        img.onload = ()=>{
          card.innerHTML = '';
          card.appendChild(img);
          const meta = document.createElement('div'); meta.className='meta';
          const origKB = (file.size/1024).toFixed(1)+' KB';
          meta.innerHTML = `<div class=\"small\">${file.name}</div><div class=\"small\">${origKB}</div>`;
          card.appendChild(meta);

          // Controls for this preview
          const btnRow = document.createElement('div'); btnRow.style.marginTop='8px';
          btnRow.innerHTML = `<button class=\"primary\" data-fileidx=\"\">Compress</button> <button data-remove class=\"\">Remove</button>`;
          card.appendChild(btnRow);

          btnRow.querySelector('[data-remove]').addEventListener('click', ()=>{
            // remove from queue and DOM
            filesQueue = filesQueue.filter(f=> f!==file);
            card.remove();
          });

          btnRow.querySelector('.primary').addEventListener('click', ()=>processSingle(file,card));
        };
      };
      reader.readAsDataURL(file);
    }

    async function processSingle(file, card){
      try{
        const opts = getOptions();
        const compressed = await compressImageFile(file, opts);
        showResult(card, file, compressed);
      }catch(err){
        alert('Compression error: '+err.message);
      }
    }

    processBtn.addEventListener('click', ()=>{
      if(filesQueue.length===0){ alert('Please select one or more images.'); return; }
      const items = Array.from(previewGrid.querySelectorAll('.preview'));
      // process top-to-bottom
      items.forEach((card, idx)=>{
        const name = card.querySelector('.small')?.textContent || '';
        // find matching file in filesQueue by name (best-effort)
        const file = filesQueue.find(f=> f.name===name) || filesQueue[idx];
        if(file) processSingle(file, card);
      });
    });

    function getOptions(){
      const q = Math.max(0.1, Math.min(1, Number(quality.value)/100));
      return {
        type: format.value,
        quality: q,
        maxWidth: maxWidth.value ? Number(maxWidth.value) : undefined,
        maxHeight: maxHeight.value ? Number(maxHeight.value) : undefined
      };
    }

    // Core compression: draw to canvas, apply resize, then toBlob
    function compressImageFile(file, {type,quality,maxWidth,maxHeight}){
      return new Promise((resolve,reject)=>{
        const reader = new FileReader();
        reader.onload = (ev)=>{
          const img = new Image(); img.src = ev.target.result;
          img.onload = ()=>{
            // calculate target size preserving aspect ratio
            let [w,h] = [img.width, img.height];
            if(maxWidth && w>maxWidth){ const ratio = maxWidth / w; w = Math.round(w*ratio); h = Math.round(h*ratio); }
            if(maxHeight && h>maxHeight){ const ratio = maxHeight / h; h = Math.round(h*ratio); w = Math.round(w*ratio); }

            const canvas = document.createElement('canvas'); canvas.width = w; canvas.height = h;
            const ctx = canvas.getContext('2d');
            // Draw with image smoothing for better results
            ctx.imageSmoothingEnabled = true; ctx.imageSmoothingQuality = 'high';
            ctx.drawImage(img, 0, 0, w, h);

            // Handle PNG output: toBlob with image/png ignores quality
            const outputType = (type === 'image/png') ? 'image/png' : (type === 'image/jpeg' ? 'image/jpeg' : 'image/webp');
            canvas.toBlob(blob=>{
              if(!blob) return reject(new Error('Could not convert image'));
              // create a File-like object for convenience
              const outFile = new File([blob], file.name.replace(/\.[^.]+$/, '') + getExtension(outputType), {type:outputType});
              resolve(outFile);
            }, outputType, quality);
          };
          img.onerror = ()=> reject(new Error('Invalid image'));
        };
        reader.onerror = ()=> reject(new Error('Could not read file'));
        reader.readAsDataURL(file);
      });
    }

    function getExtension(mime){ if(mime==='image/webp') return '.webp'; if(mime==='image/png') return '.png'; if(mime==='image/jpeg') return '.jpg'; return '' }

    function showResult(card, origFile, newFile){
      // replace or append result area
      const downUrl = URL.createObjectURL(newFile);
      const sizeKB = (newFile.size/1024).toFixed(1)+' KB';
      const origKB = (origFile.size/1024).toFixed(1)+' KB';
      const savings = (100 - Math.round((newFile.size/origFile.size)*100))||0;

      const resultRow = document.createElement('div'); resultRow.style.marginTop='8px';
      resultRow.innerHTML = `
        <div style=\"display:flex;gap:8px;align-items:center;justify-content:space-between;flex-wrap:wrap\">
          <div class=\"small\">New: ${sizeKB} — Saved ${savings}%</div>
          <div>
            <a download=\"${newFile.name}\" href=\"${downUrl}\" class=\"\">Download</a>
            <button class=\"\" data-open>Preview file</button>
          </div>
        </div>
      `;

      // Insert result area
      // remove existing result area if present
      const existing = card.querySelector('.result'); if(existing) existing.remove();
      const wrapper = document.createElement('div'); wrapper.className='result'; wrapper.appendChild(resultRow);
      card.appendChild(wrapper);

      // wire preview button
      wrapper.querySelector('[data-open]').addEventListener('click', ()=>{
        const w = window.open(downUrl, '_blank'); if(!w) alert('Popup blocked — your browser prevented preview.');
      });
    }

    // Progressive enhancement: allow open graph friendly preview copy (for sharing)
    // Accessibility: keyboard focus outlines
  </script>

  <!--
    Google AdSense integration (replace placeholders with your IDs):
    1) Replace CA_PUB_CLIENT with your publisher id: ca-pub-XXXXXXXXXXXXXXXX
    2) Replace AD_SLOT_TOP and AD_SLOT_SIDEBAR with your ad unit id numbers
    Note: AdSense requires that the page domain be registered and approved in your AdSense account.
  -->

  <!-- Example AdSense script: uncomment and replace placeholders when ready -->
  <!--
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=CA_PUB_CLIENT" crossorigin="anonymous"></script>

  <!-- Top Banner -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="CA_PUB_CLIENT"
       data-ad-slot="AD_SLOT_TOP"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>

  <!-- Sidebar ad -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="CA_PUB_CLIENT"
       data-ad-slot="AD_SLOT_SIDEBAR"
       data-ad-format="auto"></ins>
  <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
  -->

  <!-- Notes for deployment & SEO improvements:
       - Host on HTTPS, set proper cache headers and compress assets (gzip/brotli).
       - Use a robots.txt and sitemap.xml to guide crawlers.
       - Consider server-side rendered landing page and pre-rendered meta tags for social previews.
       - For even smaller images, consider adding AVIF fallback server-side.
  -->
</body>
</html>
